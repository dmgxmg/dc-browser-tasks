(()=>{"use strict";var t={419:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clickWhileVisibleStep=e.clickIfVisibleStep=e.waitClickStep=e.viewVisible=e.clickWhileVisible=e.waitClick=e.flowClick=e.useTouchClick=void 0;const i=n(737),o=n(393),s=n(947);let a=t=>i.toElement(t).click();async function c(t){const e=i.toElement(t);return!!i.elementVisible(e)&&(l(e),a(e),s.notifyTaskMessage("Click Element"),await o.flowDelay(),!0)}function l(t){i.toElement(t).scrollIntoView({block:"center"})}async function r(t){const e=await async function(t){return await o.flowWait((()=>i.elementVisible(t))),i.toElement(t)}(t);await c(e)}async function u(t){for(;;){const e=i.toElement(t);if(!i.elementVisible(e))break;await c(e)}}e.useTouchClick=function(){a=i.touchClick},e.flowClick=c,e.waitClick=r,e.clickWhileVisible=u,e.viewVisible=function(t){const e=i.toElement(t);return!!i.elementVisible(e)&&(l(e),!0)},e.waitClickStep=async function(t,e){await o.flowStep((()=>r(t)),e)},e.clickIfVisibleStep=async function(t,e){return!!i.elementVisible(t)&&await o.flowStep((()=>c(t)),e)},e.clickWhileVisibleStep=async function(t,e){return!!i.elementVisible(t)&&(await o.flowStep((()=>u(t)),e),!0)}},393:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flowWait=e.flowDelay=e.flowStep=e.flowReturnResult=e.flowReturnSuccess=e.flowReturn=e.flowThrow=e.flow=e.flowConfigure=void 0;const i=n(947),o=n(206);let s,a={waitTimeout:5e3,defaultDelayTime:500,successWhen:()=>!1};function c(t){a={...a,...t}}async function l(t=a.defaultDelayTime){i.notifyTaskDelay(t),await o.sleep(t)}e.flowConfigure=c,e.flow=async function(t,e){try{let n;if(i.notifyTaskStart(),c(e),s=t(),a.successWhen())return i.notifyTaskSuccess();for(;;){const t=await s.next(n);if(n=t.value,t.done){a.successWhen()?i.notifyTaskSuccess():t.value?i.notify(t.value):i.notifyTaskEnd();break}}}catch(t){i.notifyTaskError(t)}},e.flowThrow=function(t){return s.throw(t)},e.flowReturn=function(t){return s.return(t)},e.flowReturnSuccess=function(){return s.return(i.taskSuccessAction())},e.flowReturnResult=function(t){return s.return(i.taskResultAction(t))},e.flowStep=async function(t,e){i.notifyTaskStepStart(e);const n=await t();return i.notifyTaskStepEnd(e),n},e.flowDelay=l,e.flowWait=async function(t){const e=Date.now();for(;!t();){if(Date.now()-e>a.waitTimeout){await s.throw("Wait Timeout");break}await l()}}},260:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pageFlow=void 0;const i=n(683),o=n(393),s=n(947),a=n(419);e.pageFlow=function(t,e){const{touchClick:n,urls:c,successElement:l,...r}=e;if(c&&!function(t){const e=window.location.href;return(i.isString(t)?[t]:t).some((t=>e.startsWith(t)))}(c))return s.notifyTaskError("Page Invalid");n&&a.useTouchClick();const u=r;l&&(u.successWhen=()=>a.viewVisible(l)),o.flow(t,u).then()}},737:(t,e)=>{function n(t){return t?t instanceof HTMLElement?t:t.startsWith("//")?(n=t,document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):(e=t,document.querySelector(e)):null;var e,n}function i(t){const e=n(t);return Boolean(e&&e.offsetParent)}Object.defineProperty(e,"__esModule",{value:!0}),e.touchClick=e.elementVisibleText=e.elementVisible=e.elementExists=e.elementText=e.toElement=void 0,e.toElement=n,e.elementText=function(t){const e=n(t);return e?e.textContent:""},e.elementExists=function(t){return Boolean(n(t))},e.elementVisible=i,e.elementVisibleText=function(t){const e=n(t);return i(e)?e.textContent:""},e.touchClick=function(t){const e={bubbles:!0},i=n(t),o=new TouchEvent("touchstart",e);i.dispatchEvent(o);const s=new TouchEvent("touchend",e);i.dispatchEvent(s)}},947:(t,e)=>{function n(t){switch(t.type){case"TaskResult":case"TaskError":alert(t.payload)}}function i(t,e){return e?{type:t,payload:e}:{type:t}}function o(t){return e=>i(t,e)}function s(t){return n=>e.notify(i(t,n))}Object.defineProperty(e,"__esModule",{value:!0}),e.notifyTaskMessage=e.notifyTaskDelay=e.notifyTaskStepEnd=e.notifyTaskStepStart=e.notifyTaskResult=e.notifyTaskError=e.notifyTaskSuccess=e.notifyTaskEnd=e.notifyTaskStart=e.taskMessageAction=e.taskDelayAction=e.taskStepEndAction=e.taskStepStartAction=e.taskResultAction=e.taskErrorAction=e.taskSuccessAction=e.taskEndAction=e.taskStartAction=e.notify=void 0,e.notify=Boolean(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage)?function(t){window.ReactNativeWebView.postMessage(JSON.stringify(t))}:Boolean(window.PuppeteerLog)?function(t){window.PuppeteerLog(JSON.stringify(t)).then(),n(t)}:n,e.taskStartAction=o("TaskStart"),e.taskEndAction=o("TaskEnd"),e.taskSuccessAction=o("TaskSuccess"),e.taskErrorAction=o("TaskError"),e.taskResultAction=o("TaskResult"),e.taskStepStartAction=o("TaskStepStart"),e.taskStepEndAction=o("TaskStepEnd"),e.taskDelayAction=o("TaskDelay"),e.taskMessageAction=o("TaskMessage"),e.notifyTaskStart=s("TaskStart"),e.notifyTaskEnd=s("TaskEnd"),e.notifyTaskSuccess=s("TaskSuccess"),e.notifyTaskError=s("TaskError"),e.notifyTaskResult=s("TaskResult"),e.notifyTaskStepStart=s("TaskStepStart"),e.notifyTaskStepEnd=s("TaskStepEnd"),e.notifyTaskDelay=s("TaskDelay"),e.notifyTaskMessage=s("TaskMessage")},683:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isString=void 0,e.isString=function(t){return"string"==typeof t}},206:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sleep=void 0,e.sleep=function(t){return new Promise((e=>setTimeout(e,t)))}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}(()=>{const t=n(260),e=n(419),i=n(737),o=n(393);t.pageFlow((async function*(){for(;i.elementExists('//*[@id="m_common_content"]/div/div/div/div/div[1]/div/div[2]/div[4]/span/span[2][text()>0]');)yield e.waitClickStep('//*[@id="m_common_content"]/div/div/div/div/div[1]/div/div[2]/div[3]/div[3]/div/img',"GO"),yield o.flowDelay(2e3),yield e.clickIfVisibleStep('//*[@id="m_common_content"]/div/div/div/div/div[3]/div/div/div[2]/div/img',"关闭Modal")}),{urls:"https://turntable.m.jd.com/?actId=jgpqtzjhvaoym",successElement:'//*[@id="m_common_content"]/div/div/div/div/div[1]/div/div[2]/div[4]/span/span[2][text()=0]',touchClick:!0})})()})();